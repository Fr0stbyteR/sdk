{"version":3,"file":"index.js","sources":["../src/CompositeAudioNode.js","../src/WebAudioPlugin.js"],"sourcesContent":["/* eslint-disable no-underscore-dangle */\nexport default class CompositeAudioNode extends GainNode {\n\tconstructor(plugin, options) {\n\t\tsuper(plugin.audioContext);\n\t\tthis.plugin = plugin;\n\t\tthis.options = options;\n\t}\n\n\tconnect(...args) {\n\t\tthis._output.connect(...args);\n\t}\n\n\tdisconnect(...args) {\n\t\tthis._output.disconnect(...args);\n\t}\n\n\tconnectMidi(dest, outindex, inindex) {\n\t\tif (typeof outindex === 'undefined') outindex = 0;\n\t\tif (typeof inindex === 'undefined') inindex = 0;\n\t\tif (dest && this.outputsMidi[outindex] && dest.inputsMidi[inindex]) {\n\t\t\tthis.outputsMidi[outindex].connect(dest.inputsMidi[inindex]);\n\t\t}\n\t}\n\n\tdisconnectMidi(dest, outindex, inindex) {\n\t\tif (typeof outindex === 'undefined') outindex = 0;\n\t\tif (typeof inindex === 'undefined') inindex = 0;\n\t\tif (dest && this.outputsMidi[outindex] && dest.inputsMidi[inindex]) {\n\t\t\tthis.outputsMidi[outindex].disconnect(dest.inputsMidi[inindex]);\n\t\t}\n\t}\n\n\tcreateNodes() {\n\t\tthis._input = this.context.createGain();\n\t\tthis._output = this.context.createGain();\n\t}\n\n\tconnectNodes() {\n\t\tsuper.connect(this._input);\n\t}\n\n\tsetup() {\n\t\tthis.createNodes();\n\t\tthis.connectNodes();\n\t\tthis.updateState();\n\t\tthis.plugin.addEventListener('change', this.updateState);\n\t}\n}\n","export default class WebAudioPlugin extends EventTarget {\n\tstatic pluginName = 'WebAudioPlugin';\n\n\tinitialized = false;\n\n\tstate = {\n\t\tenabled: false,\n\t};\n\n\tconstructor(audioContext) {\n\t\tsuper();\n\t\tthis.audioContext = audioContext;\n\t}\n\n\tinitialize(state = {}) {\n\t\t// initialize state with params defaultValues\n\t\tconst defaultState = Object.entries(this.params ?? {})\n\t\t\t.reduce((acc, [name, { defaultValue }]) => ({\n\t\t\t\t...acc,\n\t\t\t\t[name]: defaultValue,\n\t\t\t}), this.state);\n\n\t\t// merge default state with initial state passed to constructor\n\t\tthis.state = { ...defaultState, ...state };\n\t\tthis.initialized = true;\n\n\t\tconsole.log('initialize plugin with state', this.state);\n\n\t\treturn this;\n\t}\n\n\tsetState(state) {\n\t\tthis.state = { ...this.state, ...state };\n\t\tthis.dispatchEvent(new Event('change', this.state));\n\t}\n\n\tcreateAudioNode = async (options = {}) => {\n\t\tconsole.log('createAudioNode()');\n\t\tconst { createNode } = await this.loadAudioNodeModule();\n\t\tif (!this.initialized) this.initialize(options.state);\n\t\treturn createNode(this, options);\n\t};\n\n\tcreateElement = async (options = {}) => {\n\t\tconsole.log('createElement()');\n\t\tconst { createElement } = await this.loadGuiModule();\n\t\tif (!this.initialized) this.initialize(options.state);\n\t\treturn createElement(this, options);\n\t};\n}\n"],"names":["CompositeAudioNode","GainNode","plugin","options","audioContext","_output","connect","disconnect","dest","outindex","inindex","this","outputsMidi","inputsMidi","_input","context","createGain","createNodes","connectNodes","updateState","addEventListener","WebAudioPlugin","EventTarget","initialized","state","enabled","createAudioNode","console","log","_this","loadAudioNodeModule","createNode","initialize","createElement","loadGuiModule","defaultState","Object","entries","params","reduce","acc","defaultValue","dispatchEvent","Event","pluginName"],"mappings":"kvIACqBA,oBAA2BC,iCACnCC,EAAQC,yCACbD,EAAOE,eACRF,OAASA,IACTC,QAAUA,8DAIVE,SAAQC,8EAIRD,SAAQE,kEAGFC,EAAMC,EAAUC,QACH,IAAbD,IAA0BA,EAAW,QACzB,IAAZC,IAAyBA,EAAU,GAC1CF,GAAQG,KAAKC,YAAYH,IAAaD,EAAKK,WAAWH,SACpDE,YAAYH,GAAUH,QAAQE,EAAKK,WAAWH,2CAItCF,EAAMC,EAAUC,QACN,IAAbD,IAA0BA,EAAW,QACzB,IAAZC,IAAyBA,EAAU,GAC1CF,GAAQG,KAAKC,YAAYH,IAAaD,EAAKK,WAAWH,SACpDE,YAAYH,GAAUF,WAAWC,EAAKK,WAAWH,+CAKlDI,OAASH,KAAKI,QAAQC,kBACtBX,QAAUM,KAAKI,QAAQC,+FAIdL,KAAKG,6CAIdG,mBACAC,oBACAC,mBACAjB,OAAOkB,iBAAiB,SAAUT,KAAKQ,sBC7CzBE,oBAAuBC,oCAS/BlB,2CANZmB,aAAc,IAEdC,MAAQ,CACPC,SAAS,KA8BVC,2CAAkB,0HAAOvB,iCAAU,GAClCwB,QAAQC,IAAI,8BACiBC,EAAKC,6CAA1BC,IAAAA,WACHF,EAAKN,aAAaM,EAAKG,WAAW7B,EAAQqB,yBACxCO,OAAiB5B,iDAGzB8B,yCAAgB,0HAAO9B,iCAAU,GAChCwB,QAAQC,IAAI,4BACoBC,EAAKK,uCAA7BD,IAAAA,cACHJ,EAAKN,aAAaM,EAAKG,WAAW7B,EAAQqB,yBACxCS,OAAoB9B,iDApCtBC,aAAeA,yDAGVoB,yDAAQ,GAEZW,EAAeC,OAAOC,kBAAQ1B,KAAK2B,sBAAU,IACjDC,QAAO,SAACC,8BACLA,iBADmBC,iBAGnB9B,KAAKa,mBAGLA,WAAaW,KAAiBX,QAC9BD,aAAc,EAEnBI,QAAQC,IAAI,+BAAgCjB,KAAKa,OAE1Cb,sCAGCa,QACHA,WAAab,KAAKa,SAAUA,QAC5BkB,cAAc,IAAIC,MAAM,SAAUhC,KAAKa,iBAjCzBH,EACbuB,WAAa"}